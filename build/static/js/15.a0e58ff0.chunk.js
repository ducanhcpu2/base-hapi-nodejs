(this["webpackJsonphnk-v1"]=this["webpackJsonphnk-v1"]||[]).push([[15],{466:function(e,t,a){"use strict";a.r(t);var n=a(112),c=a(0),l=a.n(c),i=a(204),r=a(84),o=a(201),s=a(25),u=a(31),m=a(16),b=a(7),f=a(138),O=a.n(f),j=a(142),d=a(26),g=a(34),p=a(124),E=a(141),h=a(155),N=a(465),y=a(456),C=a(457),k=a(450),v=a(453),S=a(202),T=a(471),R=a(458),w=a(244),q=a(9),B=function(e){var t,a=Object(w.a)().t,i=Object(s.d)(),u=e.onHide,m=e.onSuccessCreated,f=e.visible,O=e.modalTitle,j=e.item,d=Object(c.useState)([]),p=Object(n.a)(d,2),E=p[0],B=p[1],F=Object(c.useState)(""),H=Object(n.a)(F,2),D=H[0],_=H[1];function I(e){return function(t){var a=Object(b.map)(E,(function(t){return e.id!==t.id?Object(h.a)({},t):Object(h.a)(Object(h.a)({},e),{},{checked:!e.checked})}));B(a)}}function z(e){return function(t){var a=Object(b.map)(E,(function(t){return Object(h.a)(Object(h.a)({},t),{},{checked:e})}));B(a)}}return Object(c.useEffect)((function(){if(Object(b.get)(j,"original.id"))_(Object(b.get)(j,"original.roleName","")),i(Object(g.h)({id:Object(b.get)(j,"original.id"),pageNumber:1,pageSize:1e3},(function(e){if(e.list.length>=0){var t=Object(b.map)(E,(function(t){return-1!==e.list.findIndex((function(e){return t.id===e.idSubRole}))?Object(h.a)(Object(h.a)({},t),{},{checked:!0}):Object(h.a)(Object(h.a)({},t),{},{checked:!1})}));B(t)}}),(function(){})));else{_("");var e=Object(b.map)(E,(function(e){return Object(h.a)(Object(h.a)({},e),{},{checked:!1})}));B(e)}}),[j]),Object(c.useEffect)((function(){i(Object(g.f)({},(function(e){e.list.length>=0&&B(Object(b.map)(e.list,(function(e){return Object(h.a)(Object(h.a)({},e),{},{checked:!1})})))}),(function(){})))}),[]),l.a.createElement(N.a,{isOpen:f,className:"sipTitleModalCreateNew"},l.a.createElement(y.a,{toggle:u},O),l.a.createElement(C.a,null,l.a.createElement(k.a,null,l.a.createElement(v.a,null,a("T\xean quy\u1ec1n")),l.a.createElement(S.a,{value:D,onChange:(t=_,function(e){t(e.currentTarget.value)}),placeholder:a("Nh\u1eadp t\xean quy\u1ec1n")})),l.a.createElement(o.a,{className:"pl-1 pt-3",style:{justifyContent:"space-around"}},l.a.createElement(k.a,null,l.a.createElement(r.a,{color:"primary",onClick:z(!0)},"Ch\u1ecdn t\u1ea5t c\u1ea3")),l.a.createElement(k.a,null,l.a.createElement(r.a,{color:"primary",onClick:z(!1)},"B\u1ecf ch\u1ecdn t\u1ea5t c\u1ea3"))),l.a.createElement(o.a,{className:"pl-1 pt-3",style:{justifyContent:"space-around"}},Object(b.map)(E,(function(e){return l.a.createElement(k.a,{key:e.id.toString()},l.a.createElement(v.a,null,e.subRoleName),l.a.createElement(T.a,{type:"switch",id:e.id.toString(),name:e.RoleCode,checked:e.checked,onChange:I(e)}))})))),l.a.createElement(R.a,{className:"justify-content-end"},l.a.createElement(r.a,{color:"primary",onClick:function(e){e.preventDefault();var t={data:Object(b.map)(E,(function(e){return{roleName:D,idSubRole:e.id,RoleCode:e.RoleCode,subRoleName:e.subRoleName,status:!0===e.checked?1:0}}))};if(Object(b.get)(j,"original.id")){var n=t.data.map((function(e){return Object(h.a)(Object(h.a)({},e),{},{idRole:Object(b.get)(j,"original.id")})}));i(Object(g.i)({data:n},(function(){m(),Object(q.a)(l.a.createElement(l.a.Fragment,null,l.a.createElement("i",{className:"fa fa-check-square mr-2"}),a("C\u1eadp nh\u1eadt quy\u1ec1n")," ",a("th\xe0nh c\xf4ng")),{type:"success"})}),(function(){Object(q.a)(l.a.createElement(l.a.Fragment,null,l.a.createElement("i",{className:"fa fa-window-close mr-2"}),a("\u0110\xe3 c\xf3 l\u1ed7i x\u1ea3y ra ")),{type:"error"})})))}else i(Object(g.a)(t,(function(){m(),Object(q.a)(l.a.createElement(l.a.Fragment,null,l.a.createElement("i",{className:"fa fa-check-square mr-2"}),a("T\u1ea1o quy\u1ec1n")," ",a("th\xe0nh c\xf4ng")),{type:"success"})}),(function(){Object(q.a)(l.a.createElement(l.a.Fragment,null,l.a.createElement("i",{className:"fa fa-window-close mr-2"}),a("\u0110\xe3 c\xf3 l\u1ed7i x\u1ea3y ra ")),{type:"error"})})))}},a("Ghi l\u1ea1i"))))},F=function(e){var t=Object(c.useState)(!1),a=Object(n.a)(t,2),i=a[0],o=a[1],s=Object(w.a)().t;function u(){o(!i)}return l.a.createElement(l.a.Fragment,null,l.a.createElement(r.a,{className:e.classNameBtn?e.classNameBtn:"SipTableFunctionIcon",onClick:u,color:"primary",title:s("X\xf3a")},e.buttonLabel?e.buttonLabel:l.a.createElement("img",{src:"../../assets/img/icon/iconRemove.svg",alt:"VTPostek"})),l.a.createElement(N.a,{isOpen:i,toggle:u,className:e.className?e.className:"sipTitleModalCreateNew"},l.a.createElement(y.a,{toggle:u},e.titleModal?e.titleModal:s("X\xe1c nh\u1eadn")),l.a.createElement(C.a,null,l.a.createElement("p",null,e.contentConfirm?e.contentConfirm:s("B\u1ea1n c\xf3 mu\u1ed1n x\xf3a kh\xf4ng?"))),l.a.createElement(R.a,{className:"justify-content-end"},l.a.createElement(r.a,{color:"primary",onClick:function(){e.handleDoSomething(),o(!1)}},e.saveButton?e.saveButton:s("X\xf3a")),l.a.createElement(r.a,{onClick:u},e.cancelButton?e.cancelButton:s("H\u1ee7y")))))};t.default=function(e){var t=Object(s.d)(),a=O.a.parse(Object(b.get)(e,"location.search")),f=Object(b.get)(a,"pageNumber"),h=Object(b.get)(a,"pageitems"),N=Object(c.useState)(1),y=Object(n.a)(N,2),C=y[0],k=y[1],v=Object(c.useState)([]),S=Object(n.a)(v,2),T=S[0],R=S[1],w=Object(c.useState)(f?Object(b.toNumber)(f):1),H=Object(n.a)(w,2),D=H[0],_=H[1],I=Object(c.useState)(h?Object(b.toNumber)(h):20),z=Object(n.a)(I,2),M=z[0],X=z[1],x=Object(c.useState)(!1),L=Object(n.a)(x,2),P=L[0],G=L[1],J=Object(c.useState)({}),Q=Object(n.a)(J,2),V=Q[0],A=Q[1];Object(c.useEffect)((function(){t(Object(g.c)({pageNumber:D,pageSize:M},(function(e){e.list.length>=0&&(R(e.list),k(Object(b.toNumber)(e.total_pages)))}),(function(){})))}),[]);var K=function(e){t(Object(m.e)(Object(u.i)(d.a.THONG_TIN_CHI_TIET_ROLE,{idRole:e.id})))};function U(e){return function(){A(e),G(!P)}}function W(e){return function(){t(Object(g.b)({idRole:Object(b.get)(e,"original.id")},(function(a){q.a.success("Xo\xe1 quy\u1ec1n ".concat(Object(b.get)(e,"original.roleName","")," th\xe0nh c\xf4ng")),t(Object(g.c)({pageNumber:D,pageSize:M},(function(e){e.list.length>=0&&(R(e.list),k(Object(b.toNumber)(e.total_pages)))}),(function(){})))}),(function(){})))}}var Y=function(){!0===P&&A({}),G(!P)},Z=Object(c.useMemo)((function(){return[{Header:"ID",accessor:"id"},{Header:"T\xean quy\u1ec1n",accessor:"roleName"},{Header:"Qu\u1ea3n tr\u1ecb",accessor:"",Cell:function(e){var t=e.row;return l.a.createElement(i.a,null,l.a.createElement(r.a,{className:"ml-2",color:"primary",onClick:U(t)},l.a.createElement("i",{className:"fa fa-pencil mr-2"}),"S\u1eeda"),l.a.createElement(F,{classNameBtn:"ml-2",buttonLabel:l.a.createElement(l.a.Fragment,null,l.a.createElement("i",{className:"fa fa-trash mr-2"}),"Xo\xe1"),handleDoSomething:W(t)}))}}]}),[]);return l.a.createElement(l.a.Fragment,null,l.a.createElement(o.a,{className:"mb-3 sipTitleContainer"},l.a.createElement("h1",{className:"sipTitle"},"Th\xf4ng tin quy\u1ec1n"),l.a.createElement("div",{className:"sipTitleRightBlock"},l.a.createElement(r.a,{className:"ml-2",color:"primary",onClick:Y},l.a.createElement("i",{className:"fa fa-pencil mr-2"}),"Th\xeam m\u1edbi"))),l.a.createElement("h1",{className:"sipTitle"},"Danh s\xe1ch quy\u1ec1n"),l.a.createElement(o.a,{className:"sipTableContainer sipTableRowClickable"},l.a.createElement(j.a,{disableOnClickCellEnd:!0,columns:Z,data:T,onRowClick:K})),l.a.createElement(E.a,{pageRangeDisplayed:2,marginPagesDisplayed:2,pageCount:C,onThisPaginationChange:function(e){_(e.selected+1),function(e){var a=Object(p.a)(window.location.pathname+window.location.search,{pageNumber:e});t(Object(m.f)(Object(u.i)(a)))}(e.selected+1)},setPageSize:X}),l.a.createElement(B,{visible:P,onSuccessCreated:function(){t(Object(g.c)({pageNumber:D,pageSize:M},(function(e){e.list.length>=0&&(R(e.list),k(Object(b.toNumber)(e.total_pages)))}),(function(){}))),Y()},onHide:Y,modalTitle:"T\u1ea1o quy\u1ec1n",item:V}))}}}]);
//# sourceMappingURL=15.a0e58ff0.chunk.js.map